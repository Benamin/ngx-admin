<div class="login" fxLayout="row" fxFlex>
    <div class="login-intro" fxFlex fxHide fxShow.gt-xs>
        <div class="logo">
            <img alt="Logo" src="assets/images/logo_light.svg" height="42">
            <!-- <img alt="Angular Logo" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="> -->
        </div>

        <div class="title">Recaudacion Cashless de Consumo Masivo</div>
        <!-- <div class="title">Angular Material Teamplate</div> -->

        <div class="description">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus ullamcorper nisl erat, vel convallis elit fermentum pellentesque.
            Sed mollis velit facilisis facilisis viverra.
        </div>
    </div>

    <div class="login-form-wrapper">
        <div class="login-form" *ngIf="!registered; else elseBlock">
            <div class="logo" fxHide.gt-xs>A</div>

            <div class="title">CREATE AN ACCOUNT</div>

            <form [formGroup]="form" (ngSubmit)="form.valid && registerUser()">
                <fieldset [disabled]="(registerSubscription && !registerSubscription.closed)">
                    <mat-form-field>
                        <input matInput type="email" placeholder="Email" formControlName="email">

                        <mat-error *ngIf="form.controls['email'].hasError('pattern')" class="form-control-feedback">
                            Invalid Email
                        </mat-error>
                        <mat-error *ngIf="form.controls['email'].hasError('required')" class="form-control-feedback">
                            Email is required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput type="text" placeholder="Código" formControlName="codigo">

                        <mat-error *ngIf="form.controls['codigo'].hasError('required')" class="form-control-feedback">
                            Código is required
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput type="password" placeholder="Password" formControlName="password">

                        <mat-error *ngIf="form.controls['password'].hasError('required')" class="form-control-feedback">
                            Password is required
                        </mat-error>
                        <mat-error *ngIf="form.controls['password'].hasError('minlength')">
                            Password with less than 6 characters.
                        </mat-error>
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput type="password" placeholder="Password (Confirm)" formControlName="passwordConfirmation" [errorStateMatcher]="matcher">

                        <mat-error *ngIf="form.controls['passwordConfirmation'].hasError('required') || form.hasError('notSame')" class="form-control-feedback">
                            Passwords must match
                        </mat-error>
                    </mat-form-field>

                    <button type="submit" [disabled]="(registerSubscription && !registerSubscription.closed) || !form.valid" mat-raised-button color="primary">CREATE AN ACCOUNT</button>
                </fieldset>
            </form>

            <div class="redirection">
                <span class="text">Already have an account?</span>
                <a class="link" routerLink="/authentication/login">Login</a>
            </div>

            <mat-spinner class="loading" [diameter]="25" *ngIf="(registerSubscription && !registerSubscription.closed)"></mat-spinner>
        </div>

        <ng-template #elseBlock>
            <div class="advertisement">
                <div class="title">¡WELCOME!</div>

                <div class="content">
                    <p>Haz creado tu cuenta correctamente.</p>
                    <p>Inicia sesión para empezar a enviar archivos de cobranza.</p>

                    <button mat-raised-button color="accent" routerLink="/authentication/login">NEXT</button>
                </div>
            </div>
        </ng-template>
    </div>
</div>
